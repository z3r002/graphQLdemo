{"ast":null,"code":"import arrayFrom from \"../polyfills/arrayFrom.mjs\";\nimport objectValues from \"../polyfills/objectValues.mjs\";\nimport inspect from \"../jsutils/inspect.mjs\";\nimport invariant from \"../jsutils/invariant.mjs\";\nimport didYouMean from \"../jsutils/didYouMean.mjs\";\nimport isObjectLike from \"../jsutils/isObjectLike.mjs\";\nimport isCollection from \"../jsutils/isCollection.mjs\";\nimport suggestionList from \"../jsutils/suggestionList.mjs\";\nimport printPathArray from \"../jsutils/printPathArray.mjs\";\nimport { addPath, pathToArray } from \"../jsutils/Path.mjs\";\nimport { GraphQLError } from \"../error/GraphQLError.mjs\";\nimport { isLeafType, isInputObjectType, isListType, isNonNullType } from \"../type/definition.mjs\";\n/**\r\n * Coerces a JavaScript value given a GraphQL Input Type.\r\n */\n\nexport function coerceInputValue(inputValue, type) {\n  var onError = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultOnError;\n  return coerceInputValueImpl(inputValue, type, onError);\n}\n\nfunction defaultOnError(path, invalidValue, error) {\n  var errorPrefix = 'Invalid value ' + inspect(invalidValue);\n\n  if (path.length > 0) {\n    errorPrefix += \" at \\\"value\".concat(printPathArray(path), \"\\\"\");\n  }\n\n  error.message = errorPrefix + ': ' + error.message;\n  throw error;\n}\n\nfunction coerceInputValueImpl(inputValue, type, onError, path) {\n  if (isNonNullType(type)) {\n    if (inputValue != null) {\n      return coerceInputValueImpl(inputValue, type.ofType, onError, path);\n    }\n\n    onError(pathToArray(path), inputValue, new GraphQLError(\"Expected non-nullable type \\\"\".concat(inspect(type), \"\\\" not to be null.\")));\n    return;\n  }\n\n  if (inputValue == null) {\n    // Explicitly return the value null.\n    return null;\n  }\n\n  if (isListType(type)) {\n    var itemType = type.ofType;\n\n    if (isCollection(inputValue)) {\n      return arrayFrom(inputValue, function (itemValue, index) {\n        var itemPath = addPath(path, index, undefined);\n        return coerceInputValueImpl(itemValue, itemType, onError, itemPath);\n      });\n    } // Lists accept a non-list value as a list of one.\n\n\n    return [coerceInputValueImpl(inputValue, itemType, onError, path)];\n  }\n\n  if (isInputObjectType(type)) {\n    if (!isObjectLike(inputValue)) {\n      onError(pathToArray(path), inputValue, new GraphQLError(\"Expected type \\\"\".concat(type.name, \"\\\" to be an object.\")));\n      return;\n    }\n\n    var coercedValue = {};\n    var fieldDefs = type.getFields();\n\n    for (var _i2 = 0, _objectValues2 = objectValues(fieldDefs); _i2 < _objectValues2.length; _i2++) {\n      var field = _objectValues2[_i2];\n      var fieldValue = inputValue[field.name];\n\n      if (fieldValue === undefined) {\n        if (field.defaultValue !== undefined) {\n          coercedValue[field.name] = field.defaultValue;\n        } else if (isNonNullType(field.type)) {\n          var typeStr = inspect(field.type);\n          onError(pathToArray(path), inputValue, new GraphQLError(\"Field \\\"\".concat(field.name, \"\\\" of required type \\\"\").concat(typeStr, \"\\\" was not provided.\")));\n        }\n\n        continue;\n      }\n\n      coercedValue[field.name] = coerceInputValueImpl(fieldValue, field.type, onError, addPath(path, field.name, type.name));\n    } // Ensure every provided field is defined.\n\n\n    for (var _i4 = 0, _Object$keys2 = Object.keys(inputValue); _i4 < _Object$keys2.length; _i4++) {\n      var fieldName = _Object$keys2[_i4];\n\n      if (!fieldDefs[fieldName]) {\n        var suggestions = suggestionList(fieldName, Object.keys(type.getFields()));\n        onError(pathToArray(path), inputValue, new GraphQLError(\"Field \\\"\".concat(fieldName, \"\\\" is not defined by type \\\"\").concat(type.name, \"\\\".\") + didYouMean(suggestions)));\n      }\n    }\n\n    return coercedValue;\n  } // istanbul ignore else (See: 'https://github.com/graphql/graphql-js/issues/2618')\n\n\n  if (isLeafType(type)) {\n    var parseResult; // Scalars and Enums determine if a input value is valid via parseValue(),\n    // which can throw to indicate failure. If it throws, maintain a reference\n    // to the original error.\n\n    try {\n      parseResult = type.parseValue(inputValue);\n    } catch (error) {\n      if (error instanceof GraphQLError) {\n        onError(pathToArray(path), inputValue, error);\n      } else {\n        onError(pathToArray(path), inputValue, new GraphQLError(\"Expected type \\\"\".concat(type.name, \"\\\". \") + error.message, undefined, undefined, undefined, undefined, error));\n      }\n\n      return;\n    }\n\n    if (parseResult === undefined) {\n      onError(pathToArray(path), inputValue, new GraphQLError(\"Expected type \\\"\".concat(type.name, \"\\\".\")));\n    }\n\n    return parseResult;\n  } // istanbul ignore next (Not reachable. All possible input types have been considered)\n\n\n  false || invariant(0, 'Unexpected input type: ' + inspect(type));\n}","map":{"version":3,"sources":["D:/projects/graphQLdemo/graphqlapp/node_modules/graphql/utilities/coerceInputValue.mjs"],"names":["arrayFrom","objectValues","inspect","invariant","didYouMean","isObjectLike","isCollection","suggestionList","printPathArray","addPath","pathToArray","GraphQLError","isLeafType","isInputObjectType","isListType","isNonNullType","coerceInputValue","inputValue","type","onError","arguments","length","undefined","defaultOnError","coerceInputValueImpl","path","invalidValue","error","errorPrefix","concat","message","ofType","itemType","itemValue","index","itemPath","name","coercedValue","fieldDefs","getFields","_i2","_objectValues2","field","fieldValue","defaultValue","typeStr","_i4","_Object$keys2","Object","keys","fieldName","suggestions","parseResult","parseValue"],"mappings":"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","sourcesContent":["import arrayFrom from \"../polyfills/arrayFrom.mjs\";\r\nimport objectValues from \"../polyfills/objectValues.mjs\";\r\nimport inspect from \"../jsutils/inspect.mjs\";\r\nimport invariant from \"../jsutils/invariant.mjs\";\r\nimport didYouMean from \"../jsutils/didYouMean.mjs\";\r\nimport isObjectLike from \"../jsutils/isObjectLike.mjs\";\r\nimport isCollection from \"../jsutils/isCollection.mjs\";\r\nimport suggestionList from \"../jsutils/suggestionList.mjs\";\r\nimport printPathArray from \"../jsutils/printPathArray.mjs\";\r\nimport { addPath, pathToArray } from \"../jsutils/Path.mjs\";\r\nimport { GraphQLError } from \"../error/GraphQLError.mjs\";\r\nimport { isLeafType, isInputObjectType, isListType, isNonNullType } from \"../type/definition.mjs\";\r\n\r\n/**\r\n * Coerces a JavaScript value given a GraphQL Input Type.\r\n */\r\nexport function coerceInputValue(inputValue, type) {\r\n  var onError = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultOnError;\r\n  return coerceInputValueImpl(inputValue, type, onError);\r\n}\r\n\r\nfunction defaultOnError(path, invalidValue, error) {\r\n  var errorPrefix = 'Invalid value ' + inspect(invalidValue);\r\n\r\n  if (path.length > 0) {\r\n    errorPrefix += \" at \\\"value\".concat(printPathArray(path), \"\\\"\");\r\n  }\r\n\r\n  error.message = errorPrefix + ': ' + error.message;\r\n  throw error;\r\n}\r\n\r\nfunction coerceInputValueImpl(inputValue, type, onError, path) {\r\n  if (isNonNullType(type)) {\r\n    if (inputValue != null) {\r\n      return coerceInputValueImpl(inputValue, type.ofType, onError, path);\r\n    }\r\n\r\n    onError(pathToArray(path), inputValue, new GraphQLError(\"Expected non-nullable type \\\"\".concat(inspect(type), \"\\\" not to be null.\")));\r\n    return;\r\n  }\r\n\r\n  if (inputValue == null) {\r\n    // Explicitly return the value null.\r\n    return null;\r\n  }\r\n\r\n  if (isListType(type)) {\r\n    var itemType = type.ofType;\r\n\r\n    if (isCollection(inputValue)) {\r\n      return arrayFrom(inputValue, function (itemValue, index) {\r\n        var itemPath = addPath(path, index, undefined);\r\n        return coerceInputValueImpl(itemValue, itemType, onError, itemPath);\r\n      });\r\n    } // Lists accept a non-list value as a list of one.\r\n\r\n\r\n    return [coerceInputValueImpl(inputValue, itemType, onError, path)];\r\n  }\r\n\r\n  if (isInputObjectType(type)) {\r\n    if (!isObjectLike(inputValue)) {\r\n      onError(pathToArray(path), inputValue, new GraphQLError(\"Expected type \\\"\".concat(type.name, \"\\\" to be an object.\")));\r\n      return;\r\n    }\r\n\r\n    var coercedValue = {};\r\n    var fieldDefs = type.getFields();\r\n\r\n    for (var _i2 = 0, _objectValues2 = objectValues(fieldDefs); _i2 < _objectValues2.length; _i2++) {\r\n      var field = _objectValues2[_i2];\r\n      var fieldValue = inputValue[field.name];\r\n\r\n      if (fieldValue === undefined) {\r\n        if (field.defaultValue !== undefined) {\r\n          coercedValue[field.name] = field.defaultValue;\r\n        } else if (isNonNullType(field.type)) {\r\n          var typeStr = inspect(field.type);\r\n          onError(pathToArray(path), inputValue, new GraphQLError(\"Field \\\"\".concat(field.name, \"\\\" of required type \\\"\").concat(typeStr, \"\\\" was not provided.\")));\r\n        }\r\n\r\n        continue;\r\n      }\r\n\r\n      coercedValue[field.name] = coerceInputValueImpl(fieldValue, field.type, onError, addPath(path, field.name, type.name));\r\n    } // Ensure every provided field is defined.\r\n\r\n\r\n    for (var _i4 = 0, _Object$keys2 = Object.keys(inputValue); _i4 < _Object$keys2.length; _i4++) {\r\n      var fieldName = _Object$keys2[_i4];\r\n\r\n      if (!fieldDefs[fieldName]) {\r\n        var suggestions = suggestionList(fieldName, Object.keys(type.getFields()));\r\n        onError(pathToArray(path), inputValue, new GraphQLError(\"Field \\\"\".concat(fieldName, \"\\\" is not defined by type \\\"\").concat(type.name, \"\\\".\") + didYouMean(suggestions)));\r\n      }\r\n    }\r\n\r\n    return coercedValue;\r\n  } // istanbul ignore else (See: 'https://github.com/graphql/graphql-js/issues/2618')\r\n\r\n\r\n  if (isLeafType(type)) {\r\n    var parseResult; // Scalars and Enums determine if a input value is valid via parseValue(),\r\n    // which can throw to indicate failure. If it throws, maintain a reference\r\n    // to the original error.\r\n\r\n    try {\r\n      parseResult = type.parseValue(inputValue);\r\n    } catch (error) {\r\n      if (error instanceof GraphQLError) {\r\n        onError(pathToArray(path), inputValue, error);\r\n      } else {\r\n        onError(pathToArray(path), inputValue, new GraphQLError(\"Expected type \\\"\".concat(type.name, \"\\\". \") + error.message, undefined, undefined, undefined, undefined, error));\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    if (parseResult === undefined) {\r\n      onError(pathToArray(path), inputValue, new GraphQLError(\"Expected type \\\"\".concat(type.name, \"\\\".\")));\r\n    }\r\n\r\n    return parseResult;\r\n  } // istanbul ignore next (Not reachable. All possible input types have been considered)\r\n\r\n\r\n  false || invariant(0, 'Unexpected input type: ' + inspect(type));\r\n}\r\n"]},"metadata":{},"sourceType":"module"}